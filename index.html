<!DOCTYPE html>
<html>
<head>
    <title>–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</title>
    <style>
        body {
    font-family: Arial, sans-serif;
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
    background-color: #f5f5f5;
}

h1 {
    color: #333;
    text-align: center;
    margin-bottom: 30px;
}

div {
    text-align: center;
    margin-bottom: 20px;
}

input, button {
    padding: 10px 15px;
    font-size: 16px;
}

.completed {
    text-decoration: line-through;
    color: #888;
    opacity: 0.7;
}

@media (max-width: 600px) {
    body {
        padding: 10px;
        font-size: 14px;
    }
    
    h1 {
        font-size: 24px;
        margin-bottom: 20px;
    }
    
    input, button {
        width: 100%;
        margin: 5px 0;
        box-sizing: border-box;
    }
}
    </style>
</head>
<body>
    <h1>üõí –ú–æ–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h1>
    
    <div>
        <input type="text" id="itemInput" placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ –∫—É–ø–∏—Ç—å?">
        <button id="addButton">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>
    
    <ul id="shoppingList"></ul>

    <script>
        const input = document.getElementById('itemInput'); 
        const button = document.getElementById('addButton');  
        const list = document.getElementById('shoppingList'); 
        let shoppingList = [];

    const saveToLocalStorage = () => {
        const dataString = JSON.stringify(shoppingList);
        localStorage.setItem('shoppingList', dataString);
}

    const loadFromLocalStorage = () => {
        const dataString = localStorage.getItem('shoppingList');
            if (dataString) {
            shoppingList = JSON.parse(dataString);
    }
}


loadFromLocalStorage();

shoppingList.forEach(itemText => {
    const itemElement = document.createElement('li');


    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.checked = itemText.completed; 

    checkbox.addEventListener('click', function(event) {
    event.stopPropagation();
});

    checkbox.addEventListener('change', function() {
    const item = shoppingList.find(item => item.id === itemText.id);
    if (item) {
        item.completed = checkbox.checked;

        if (checkbox.checked) {
            textSpan.classList.add('completed');
        } else {
            textSpan.classList.remove('completed');
        }


        saveToLocalStorage();
    }
});

    const textSpan = document.createElement('span');
    textSpan.textContent = itemText.name;

    itemElement.appendChild(checkbox);
    itemElement.appendChild(textSpan);
    

    itemElement.addEventListener('click', function() {
        const index = shoppingList.findIndex(item => item.id === itemText.id);
        if (index > -1) {
            shoppingList.splice(index, 1);
        }
        itemElement.remove();
        saveToLocalStorage();
    });
    
    list.appendChild(itemElement);
});

button.addEventListener('click', function() {
        const itemText = input.value;
        if (itemText !== '') {
            const newItemObj = {
        id: Date.now(),
        name: itemText,
        completed: false
    };
        shoppingList.push(newItemObj);

        const newItem = document.createElement('li');
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = newItemObj.completed;

        checkbox.addEventListener('click', function(event) {
        event.stopPropagation();
});

        checkbox.addEventListener('change', function() {
    const item = shoppingList.find(item => item.id === newItemObj.id);
    if (item) {
        item.completed = checkbox.checked;

        if (checkbox.checked) {
            textSpan.classList.add('completed');
        } else {
            textSpan.classList.remove('completed');
        }


        saveToLocalStorage();
    }
});

        const textSpan = document.createElement('span');
        textSpan.textContent = newItemObj.name;

        if (itemText.completed) {
    textSpan.classList.add('completed');
}

        newItem.appendChild(checkbox);
        newItem.appendChild(textSpan);


        newItem.addEventListener('click', function() {
            const index = shoppingList.findIndex(item => item.id === newItemObj.id);
            if (index > -1) {
                shoppingList.splice(index, 1);
            }
            newItem.remove();
            saveToLocalStorage();
        });

        list.appendChild(newItem);
        input.value = '';
        saveToLocalStorage();
    }
});
    </script>
</body>
</html>